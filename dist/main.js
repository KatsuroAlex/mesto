(()=>{"use strict";const e={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_inactive",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"},t=document.querySelector(".profile__title"),s=document.querySelector(".profile__subtitle"),n=document.querySelector(".popup_type_profile"),o=document.querySelector(".popup_type_cards"),r=document.querySelector(".popup_type_picture"),i=document.querySelector(".profile__rectangle-button"),l=document.querySelector(".profile__add-button"),p=document.querySelector(".popup__form_type_cards"),u=document.querySelector(".popup__form_profile"),c=u.querySelector(".popup__input_field_name"),_=u.querySelector(".popup__input_field_info"),a=document.querySelector(".popup__input_field_name");class d{constructor(e,t,s){this._name=e.name,this._link=e.link,this._templateSelector=t,this._handleCardClick=s}_getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}generateCard(){return this._element=this._getTemplate(),this._setEventListeners(),this._elementText.textContent=this._name,this._elementPhoto.src=this._link,this._elementPhoto.alt=this._name,this._element}_setEventListeners(){this._likeButton=this._element.querySelector(".element__like"),this._elementPhoto=this._element.querySelector(".element__photo"),this._elementDeleteCard=this._element.querySelector(".element__delete-card"),this._elementText=this._element.querySelector(".element__text"),this._elementPhoto.addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)})),this._likeButton.addEventListener("click",(()=>{this._toggleLike()})),this._elementDeleteCard.addEventListener("click",(()=>{this._handleDeleteCard()}))}_toggleLike(){this._likeButton.classList.toggle("element__like_active")}_handleDeleteCard(){this._element.remove()}}class h{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}_showInputError(e,t){const s=this._formElement.querySelector(`.${e.id}-error`);e.classList.add(this._inputErrorClass),s.textContent=t,s.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}enableValidation(){this._setEventListeners()}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_setEventListeners(){this.toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}resetValidation(){this.toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}}class m{constructor(e){this._popupSelector=e,this._closeButton=document.querySelector(".popup__close"),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupSelector.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupSelector.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._closeButton.addEventListener("click",(()=>this.close())),this._popupSelector.addEventListener("mousedown",(e=>{(e.target===e.currentTarget||e.target.classList.contains("popup__close"))&&this.close()}))}}class v extends m{constructor(e,t){super(e),this._handleSubmitForm=t,this._popupForm=this._popupSelector.querySelector(".popup__form"),this._inputList=this._popupSelector.querySelectorAll(".popup__input")}_getInputValues(){return this._inputList=this._popupSelector.querySelectorAll(".popup__input"),this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setEventListeners(){super.setEventListeners(),this._popupSelector.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmitForm(this._getInputValues())}))}close(){super.close(),this._popupForm.reset()}}function S(e){return new d({name:e.name,link:e.link},".item_template",g).generateCard()}const f=new class{constructor({items:e,renderer:t},s){this._renderedItems=e,this._renderer=t,this._container=document.querySelector(s)}addItem(e){this._container.prepend(e)}renderItems(){this._renderedItems.forEach((e=>{this._renderer(e)}))}}({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:e=>{f.addItem(S(e))}},".elements__list");f.renderItems();const y=new v(o,(e=>{f.addItem(S(e)),y.close()}));y.setEventListeners();const E=new class extends m{constructor(e){super(e),this._popupPictureImage=document.querySelector(".popup__image"),this._popupPictureTitle=document.querySelector(".popup__title_type_picture")}open(e,t){super.open(),this._popupPictureImage.src=t,this._popupPictureImage.alt=e,this._popupPictureTitle.textContent=e}}(r);function g(e,t){E.open(e,t)}E.setEventListeners();const L=new class{constructor({userName:e,userInfo:t}){this._elementName=document.querySelector(e),console.log(this._elementName),this._elementInfo=document.querySelector(t),console.log(this._elementInfo)}getUserInfo(){const e={name:this._elementName.textContent,info:this._elementInfo.textContent};return console.log(e),e}setUserInfo(e){this._elementName.textContent=e.name,this._elementInfo.textContent=e.info,console.log(e.name),console.log(e.info)}}({userName:".profile__title",userInfo:".profile__subtitle"}),k=new v(n,(e=>{console.log(e),L.setUserInfo(e),k.close()}));k.setEventListeners(),a.addEventListener("click",(()=>{const e=L.getUserInfo();c.value=e.name,_.value=e.info,console.log(L.getUserInfo()),console.log(c.value),console.log(_.value),k.open()}));const C=new h(e,p);C.enableValidation();const I=new h(e,u);I.enableValidation(),l.addEventListener("click",(()=>{y.open(),p.reset(),C.resetValidation()})),i.addEventListener("click",(()=>{c.value=t.textContent,_.value=s.textContent,k.open(),I.resetValidation()}))})();